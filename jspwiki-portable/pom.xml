<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<<<<<<< HEAD
<project xmlns              = "http://maven.apache.org/POM/4.0.0"
         xmlns:xsi          = "http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation = "http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
=======
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094

  <parent>
    <groupId>org.apache.jspwiki</groupId>
    <artifactId>jspwiki-builder</artifactId>
<<<<<<< HEAD
    <version>2.10.1-SNAPSHOT</version>
=======
    <version>2.10.3-SNAPSHOT</version>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
  </parent>

  <modelVersion>4.0.0</modelVersion>
  <artifactId>jspwiki-portable</artifactId>
  <name>Apache JSPWiki portable</name>
<<<<<<< HEAD
  <packaging>pom</packaging>

  <build>
    <plugins>
	  <plugin>
=======

  <properties>
    <jspwiki.woas.language>en</jspwiki.woas.language>
  </properties>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <configuration>
          <filesets>
            <fileset>
              <directory>${basedir}/logs</directory>
            </fileset>
          </filesets>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <id>woas:copy-woas</id>
            <phase>process-resources</phase>
            <configuration>
              <target>
                <property name="jspwiki.woas.version" value="${project.version}" />
                <ant antfile="${basedir}/build.xml" target="woas:info" />
                <ant antfile="${basedir}/build.xml" target="woas:copy-woas" />
              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>          
          <execution>
            <id>woas:copy-tomcat-7</id>
            <phase>prepare-package</phase>
            <configuration>
              <target>
                <property name="jspwiki.woas.version" value="${project.version}" />
                <ant antfile="${basedir}/build.xml" target="woas:copy-tomcat-7" />
              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
          <execution>
            <id>woas:copy-launchers</id>
            <phase>prepare-package</phase>
            <configuration>
              <target>
                <property name="jspwiki.woas.version" value="${project.version}" />
                <ant antfile="${basedir}/build.xml" target="woas:info" />
                <ant antfile="${basedir}/build.xml" target="woas:copy-tomcat-7-launchers" />
              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.8</version>
        <executions>
<<<<<<< HEAD
		  <execution>
            <id>unzip-workdirs</id>
            <phase>process-resources</phase>
=======
          <!-- Unpack the JSP Wiki web archive -->
          <execution>
            <id>unpack-jspwiki-war</id>
            <phase>generate-resources</phase>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
<<<<<<< HEAD
                  <groupId>com.akathist.maven.plugins.launch4j</groupId>
                  <artifactId>launch4j-maven-plugin</artifactId>
                  <version>1.5.2</version>
                  <type>maven-plugin</type>
				  <classifier>workdir-linux</classifier>
                </artifactItem>
                <artifactItem>
                  <groupId>com.akathist.maven.plugins.launch4j</groupId>
                  <artifactId>launch4j-maven-plugin</artifactId>
                  <version>1.5.2</version>
                  <type>maven-plugin</type>
				  <classifier>workdir-mac</classifier>
                </artifactItem>
                <artifactItem>
                  <groupId>com.akathist.maven.plugins.launch4j</groupId>
                  <artifactId>launch4j-maven-plugin</artifactId>
                  <version>1.5.2</version>
                  <type>maven-plugin</type>
				  <classifier>workdir-solaris</classifier>
                </artifactItem>
                <artifactItem>
                  <groupId>com.akathist.maven.plugins.launch4j</groupId>
                  <artifactId>launch4j-maven-plugin</artifactId>
                  <version>1.5.2</version>
                  <type>maven-plugin</type>
				  <classifier>workdir-win32</classifier>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${project.build.directory}/launch4j</outputDirectory>
            </configuration>
          </execution>
		  
          <execution>
            <id>grab-needed-libs</id>
            <phase>process-resources</phase>
            <goals>
              <goal>copy</goal>
=======
                  <groupId>org.apache.jspwiki</groupId>
                  <artifactId>jspwiki-war</artifactId>
                  <version>${project.version}</version>
                  <type>war</type>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${project.build.directory}/unpack/jspwiki-war</outputDirectory>
            </configuration>
          </execution>
          <!-- Unpack the JSP Wiki Pages for the "personal" wiki -->
          <execution>
            <id>unpack-wikipages-personal</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>unpack</goal>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
<<<<<<< HEAD
                  <groupId>com.thoughtworks.xstream</groupId>
                  <artifactId>xstream</artifactId>
                  <version>1.3.1</version>
                  <type>jar</type>
                </artifactItem>
                <artifactItem>
                  <groupId>com.akathist.maven.plugins.launch4j</groupId>
                  <artifactId>launch4j-maven-plugin</artifactId>
                  <version>1.5.2</version>
                  <type>maven-plugin</type>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${project.build.directory}/launch4j</outputDirectory>
            </configuration>
          </execution>
        </executions>
      </plugin>
	  
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
		<version>2.1</version><!-- 2.1 not affected by https://issues.apache.org/jira/browse/MTOMCAT-211 -->
        <executions>
          <execution>
            <id>tomcat-run</id>
            <goals>
              <goal>exec-war-only</goal>
            </goals>
            <phase>package</phase>
            <configuration>
              <charset>${project.build.sourceEncoding}</charset>
              <enableNaming>true</enableNaming>
			  <extraResources>
			    <extraResource>
				  <directory>./src/main/resources</directory>
                  <includes>
                    <include>jspwiki-custom.properties</include>
                  </includes>
				</extraResource>
			  </extraResources>
              <finalName>${project.artifactId}-${project.version}.jar</finalName>
              <server>tomcat</server>
              <url>http://localhost:8080/manager/text</url>
              <warRunDependencies>
                <warRunDependency>
                  <contextPath>/JSPWiki</contextPath>
                  <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>jspwiki-war</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                  </dependency>
                </warRunDependency>
              </warRunDependencies>
=======
                  <groupId>org.apache.jspwiki.wikipages</groupId>
                  <artifactId>jspwiki-wikipages-${jspwiki.woas.language}</artifactId>
                  <version>${project.version}</version>
                </artifactItem>
              </artifactItems>
              <excludes>META-INF/**</excludes>
              <outputDirectory>${project.build.directory}/woas/data/personal</outputDirectory>
            </configuration>
          </execution>
          <!-- Unpack the JSP Wiki Pages for the "department" wiki -->
          <execution>
            <id>unpack-wikipages-department</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>org.apache.jspwiki.wikipages</groupId>
                  <artifactId>jspwiki-wikipages-${jspwiki.woas.language}</artifactId>
                  <version>${project.version}</version>
                </artifactItem>
              </artifactItems>
              <excludes>META-INF/**</excludes>
              <outputDirectory>${project.build.directory}/woas/data/department</outputDirectory>
            </configuration>
          </execution>
          <!-- Unpack the tomcat distribution -->
          <execution>
            <id>unpack-tomcat-zip</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>org.apache.tomcat</groupId>
                  <artifactId>tomcat</artifactId>
                  <version>7.0.52</version>
                  <type>zip</type>
                </artifactItem>
              </artifactItems>
              <outputDirectory>${project.build.directory}/unpack/tomcat</outputDirectory>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
            </configuration>
          </execution>
        </executions>
      </plugin>
<<<<<<< HEAD
	  
      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <id>launch4j</id>
			<goals>
              <goal>run</goal>
            </goals>
            <phase>package</phase>
            <configuration>
              <target>
			    <property name="maven.artifactId" value="${project.artifactId}" />
				<property name="maven.version" value="${project.version}" />
				
			    <ant antfile="${project.basedir}/build.xml" inheritRefs="true" inheritall="true">
                  <target name="woas:windows-app" />
                </ant>
			  </target>
            </configuration>
=======
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <!-- Create the installed/released artifacts -->
        <executions>
          <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <configuration>
              <tarLongFileMode>gnu</tarLongFileMode>
              <descriptors>
                <descriptor>${basedir}/src/main/assembly/woas-dist.xml</descriptor>
              </descriptors>
            </configuration>
            <goals>
              <goal>single</goal>
            </goals>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
<<<<<<< HEAD
</project>
=======

</project>
>>>>>>> fbf0008a47db5d7946a86d8aa5ba7af192c61094
